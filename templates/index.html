<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>GAE (Gato Analytics Engine)</title>
    <!-- Link to external CSS file -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js Date Adapter (date-fns adapter) -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  </head>
  <body>
    <h1>Discord Server Analytics Dashboard</h1>
    <div class="controls">
      <button onclick="addPanel('metrics_panel')">Show Metrics Panel</button>
      <button onclick="removePanel('metrics_panel')">Hide Metrics Panel</button>
      <button onclick="addPanel('latest_message_panel')">Show Latest Message Panel</button>
      <button onclick="removePanel('latest_message_panel')">Hide Latest Message Panel</button>
      <!-- New buttons for Line Graph Panel -->
      <button onclick="addPanel('line_graph_panel')">Show Line Graph Panel</button>
      <button onclick="removePanel('line_graph_panel')">Hide Line Graph Panel</button>
      <!-- New buttons for User Activity Panel -->
      <button onclick="addPanel('user_activity_panel')">Show User Activity Panel</button>
      <button onclick="removePanel('user_activity_panel')">Hide User Activity Panel</button>
    </div>
    <div id="dashboard">
      <div id="metrics_panel" class="panel">
        <h2>Metrics</h2>
        <p>Total Messages: <span id="total_messages">0</span></p>
        <p>Total Reactions: <span id="total_reactions">0</span></p>
        <p>Active Users: <span id="active_users">0</span></p>
      </div>
      <div id="latest_message_panel" class="panel">
        <h2>Latest Message</h2>
        <div id="message_content">
          <p>Waiting for new messages...</p>
        </div>
      </div>
      <!-- New panel for the line graph -->
      <div id="line_graph_panel" class="panel" style="display: none;">
        <h2>Message Count (Last 10 Minutes)</h2>
        <canvas id="messageChart" width="400" height="200"></canvas>
      </div>
      <!-- New panel for the user activity bar chart -->
      <div id="user_activity_panel" class="panel" style="display: none;">
        <h2>User Activity (Last Hour)</h2>
        <canvas id="userActivityChart" width="600" height="400"></canvas>
      </div>
    </div>
    <!-- Load SocketIO client library from a CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.0/socket.io.min.js"></script>
    <!-- Link to external JavaScript file -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html> 